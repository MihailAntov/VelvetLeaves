@model ShoppingCartViewModel
@inject IImageService imageService;
@{
	ViewData["Title"] = "Shopping cart";
}

<div class="container-fluid">
	



	<h1 class="mb-4">Shopping Cart</h1>

	<div class="row">
		<div class="col-md-7 w-auto ms-0 me-0 ps-0 pe-0">
				<table class="table shadow-lg bg-transparent full-cart @(Model.Items.Any() ? "d-block" : "d-none")">
					<thead>
						<tr>
							<th></th>
							<th>Product</th>
							<th>Price</th>
							<th>Quantity</th>
							<th>Total</th>
							<th></th>

						</tr>
					</thead>

					<tbody>
						@foreach (var item in Model.Items)
						{
							<tr id="product@(item.Id)">
								<td>
									<img width="50" height="50" src="data:img/jpg;base64,@await imageService.GetAsync(item.ImageId)"/>
								</td>
								<td class="fw-bold">@item.Name</td>
								<td>
									<div class="flex-md-row d-md-flex">
										<span>@item.Price.ToString("f2")</span>
										<span class="me-auto">@Model.Currency</span>
									</div>
								</td>
								<td>
									<div class="flex-row d-flex">
										<a class="btn p-1 minus-button" @(item.Quantity == 1 ? "disabled" : "") productId="@item.Id"><i class="fa-solid fa-minus"></i></a>
										<span class=" p-1 product-quantity" productId="@item.Id">@item.Quantity</span>
										<a class="btn p-1 plus-button me-auto" productId="@item.Id"><i class="fa-solid fa-plus"></i></a>
									</div>

								</td>
								<td>
									
									<div class="flex-md-row d-md-flex">
										<span class="product-total" productId = @item.Id>@((item.Price * item.Quantity).ToString("f2"))</span>
										<span class="me-auto">@Model.Currency</span>
									</div>
								</td>
								<td>
									<a class="btn p-0 m-0 col-1 delete-button" productId="@item.Id"><i class="fa-solid fa-trash"></i></a>
								</td>
							</tr>
						}


					</tbody>

				</table>
			
				<table class="empty-cart table shadow-lg bg-transparent @(Model.Items.Any() ? "d-none" : "d-block")" >
					<tbody>
						<tr>
							<td>
								<p>There are no items in your shopping cart.</p>
							</td>
						</tr>
					</tbody>
				</table>
			
		</div>

		<div class="col-md-5 checkout-panel @(Model.Items.Any() ? "d-block" : "d-none")">
			<div class="card shadow-lg bg-transparent">
				<div class="card-body">
					<h5 class="card-title">Order Summary</h5>

					<div class="d-flex flex-row">
						<span class="p-2">Total items:</span>
						<span class="p-2 ps-1" id="total-items">@Model.TotalItems</span>
					</div>
					
					
					<div class="d-flex flex-row">
						<h4 class="p-2">Total:</h4>
						<h4 class="p-2" id="total">@Model.Total</h4>
						<h4 class="p-2 ps-0">@Model.Currency</h4>
					</div>
					
					<a href="#" class="btn btn-primary">Checkout</a>
				</div>
			</div>
		</div>
	</div>
		
</div>




@section Scripts{
	<script src="~/js/shoppingCartEvents.js"></script>
}